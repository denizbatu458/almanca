<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Öğretmene Mesaj</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg1:#161d3f;
  --bg2:#101633;
  --card:rgba(255,255,255,.08);
  --text:#f5f7ff;
  --muted:#c7d0ff;
  --border:rgba(255,255,255,.16);
  --neon:#ff4b4b;
  --neon2:#ff8a8a;
}
body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:
    radial-gradient(900px 600px at 10% 10%, rgba(255,75,75,.18), transparent 60%),
    radial-gradient(900px 600px at 90% 20%, rgba(120,140,255,.28), transparent 65%),
    linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--text);
}
.container{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
}
.card{
  width:460px;
  background:var(--card);
  padding:28px;
  border-radius:22px;
  border:1px solid var(--border);
  box-shadow:0 20px 60px rgba(0,0,0,.25);
}
textarea{
  width:100%;
  height:130px;
  margin-top:12px;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(10,14,34,.55);
  color:#fff;
  resize:none;
  outline:none;
}
textarea:focus{border-color:rgba(255,255,255,.32)}
button{
  width:100%;
  margin-top:18px;
  padding:12px;
  border-radius:14px;
  border:none;
  background:linear-gradient(135deg,var(--neon),var(--neon2));
  color:#fff;
  font-weight:800;
  cursor:pointer;
}
small{color:var(--muted)}
</style>
</head>

<body>

<div class="container">
  <div class="card">
    <h2>✉️ Öğretmene Mesaj</h2>
    <small>Merak ettiklerini öğretmenine ilet</small>

    <textarea id="msg" placeholder="Mesajını buraya yaz..."></textarea>
    <button onclick="send()">Gönder</button>
  </div>
</div>

<script>
const KEY_MSG="teacher_messages";
const KEY_STUDENTS="students_v2";
const KEY_SESSION="session_student_id";

function getStudents(){
  return JSON.parse(localStorage.getItem(KEY_STUDENTS))||[];
}
function getSession(){
  const id=localStorage.getItem(KEY_SESSION);
  return getStudents().find(s=>String(s.id)===String(id));
}

function send(){
  const s=getSession();
  if(!s){alert("Giriş yok");return}
  const text=document.getElementById("msg").value.trim();
  if(!text)return;

  const arr=JSON.parse(localStorage.getItem(KEY_MSG))||[];
  arr.push({
    studentId: s.id,          // ✅ eklendi (admin cevap eşleşmesi için)
    name:s.name,
    username:s.username,
    level:s.level,
    text,
    date:new Date().toLocaleString("tr-TR")
  });
  localStorage.setItem(KEY_MSG,JSON.stringify(arr));
  document.getElementById("msg").value="";
  alert("Mesaj gönderildi ✅");
}
</script>

</body>
</html>
